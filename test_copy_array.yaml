# test_copy_array.asm.yaml
# Тестовая программа для проверки операций с памятью
# Копирует массив из адреса 100 в адрес 200

commands:
  # Инициализация регистров
  # R1 = 100 (начальный адрес источника)
  - opcode: 29    # LOAD_CONST
    operands:
      B: 100     # Константа
      C: 1       # Адрес регистра

  # R2 = 200 (начальный адрес назначения)
  - opcode: 29    # LOAD_CONST
    operands:
      B: 200     # Константа
      C: 2       # Адрес регистра

  # R3 = 5 (количество элементов)
  - opcode: 29    # LOAD_CONST
    operands:
      B: 5       # Константа
      C: 3       # Адрес регистра

  # R4 = 0 (счетчик)
  - opcode: 29    # LOAD_CONST
    operands:
      B: 0       # Константа
      C: 4       # Адрес регистра

  # R5 = 1 (инкремент)
  - opcode: 29    # LOAD_CONST
    operands:
      B: 1       # Константа
      C: 5       # Адрес регистра

  # === Начало цикла копирования ===
  
  # Загрузка значения из источника в R10
  # READ_MEM: R10 = M[R1]
  - opcode: 18    # READ_MEM
    operands:
      B: 10      # Адрес регистра-назначения
      C: 1       # Адрес регистра-источника (памяти)

  # Запись значения в назначение
  # WRITE_MEM: M[R2] = R10
  - opcode: 9     # WRITE_MEM
    operands:
      B: 2       # Адрес регистра-памяти
      C: 10      # Адрес регистра-источника данных

  # Увеличиваем адрес источника: R1 = R1 + 1
  - opcode: 29    # LOAD_CONST
    operands:
      B: 1       # Константа (инкремент)
      C: 6       # Временный регистр
  
  # R1 = R1 + R6
  # Пока не реализовано ADD, используем LOAD_CONST
  - opcode: 29    # LOAD_CONST
    operands:
      B: 101     # Новая константа
      C: 1       # Адрес регистра

  # Увеличиваем адрес назначения: R2 = R2 + 1
  - opcode: 29    # LOAD_CONST
    operands:
      B: 201     # Новая константа
      C: 2       # Адрес регистра

  # Увеличиваем счетчик: R4 = R4 + 1
  - opcode: 29    # LOAD_CONST
    operands:
      B: 1       # Новая константа
      C: 4       # Адрес регистра

  # Сравнение счетчика с количеством элементов
  # Пока не реализовано CMP, просто останавливаемся после 1 итерации
